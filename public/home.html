<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Silas Car Rentals - Dashboard</title>

  <!-- Bootstrap 5.3.2 (Responsive & Mobile-first) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <!-- Animate.css -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
</head>
<body style="font-family:'Inter',sans-serif;">

<!-- Top Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top animate__animated animate__fadeInDown">
  <div class="container-fluid">
    <!-- Sidebar toggle button for mobile -->
    <button class="btn btn-outline-success d-lg-none me-2" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
      <i class="fas fa-bars"></i>
    </button>

    <a href="home.html" class="navbar-brand fw-bold text-success"><i class="fas fa-car me-2"></i>Silas Car Rentals</a>

    <form class="d-none d-md-flex ms-3 flex-fill">
      <input class="form-control me-2" type="search" placeholder="Search cars...">
      <button class="btn btn-success"><i class="fas fa-search"></i></button>
    </form>

    <div class="ms-auto d-flex align-items-center gap-3">
      <!-- Notifications -->
      <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown"><i class="fas fa-bell"></i></button>
        <ul class="dropdown-menu dropdown-menu-end" id="notifications">
          <li class="dropdown-header fw-bold">Notifications</li>
          <li><hr class="dropdown-divider"></li>
        </ul>
      </div>
      <!-- Counters -->
      <a href="cart.html" class="btn btn-outline-primary position-relative">
        <i class="fas fa-shopping-cart"></i>
        <span id="cart-count" class="badge bg-success position-absolute top-0 start-100 translate-middle">0</span>
      </a>
      <a href="wishlist.html" class="btn btn-outline-danger position-relative">
        <i class="fas fa-heart"></i>
        <span id="wishlist-count" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
      </a>
      <a href="saved.html" class="btn btn-outline-warning position-relative">
        <i class="fas fa-bookmark"></i>
        <span id="saved-count" class="badge bg-warning position-absolute top-0 start-100 translate-middle">0</span>
      </a>
      <!-- Theme -->
      <button id="theme-toggle" class="btn btn-outline-secondary"><i class="fas fa-moon"></i></button>
      <!-- Profile -->
      <div class="dropdown">
        <button class="btn btn-success dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
          <div id="nav-avatar" class="rounded-circle me-2 d-flex align-items-center justify-content-center bg-success text-white fw-bold" style="width:32px; height:32px; font-size:0.9rem;"></div>
          <span id="user-name">User</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="profile.html"><i class="fas fa-user me-2"></i>Profile</a></li>
          <li><a class="dropdown-item" href="orders.html"><i class="fas fa-box me-2"></i>My Orders</a></li>
          <li><button class="dropdown-item text-danger" id="logout-button"><i class="fas fa-sign-out-alt me-2"></i>Logout</button></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar Offcanvas -->
    <div class="offcanvas offcanvas-start bg-light" tabindex="-1" id="sidebarMenu">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold text-success"><i class="fas fa-car me-2"></i>Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body p-3">
        <h6 class="text-muted mb-3">Dashboard</h6>
        <ul class="nav flex-column gap-2">
          <li><a href="profile.html" class="nav-link"><i class="fas fa-user me-2"></i> Profile</a></li>
          <li><a href="orders.html" class="nav-link"><i class="fas fa-box me-2"></i> Orders</a></li>
          <li><a href="cart.html" class="nav-link"><i class="fas fa-shopping-cart me-2"></i> Cart</a></li>
          <li><a href="wishlist.html" class="nav-link"><i class="fas fa-heart me-2"></i> Wishlist</a></li>
          <li><a href="saved.html" class="nav-link"><i class="fas fa-bookmark me-2"></i> Saved</a></li>
        </ul>
      </div>
    </div>

    <!-- Sidebar Desktop -->
    <aside class="col-md-3 col-lg-2 bg-light border-end min-vh-100 p-3 d-none d-lg-block">
      <h6 class="text-muted mb-3">Dashboard</h6>
      <ul class="nav flex-column gap-2">
        <li><a href="profile.html" class="nav-link"><i class="fas fa-user me-2"></i> Profile</a></li>
        <li><a href="orders.html" class="nav-link"><i class="fas fa-box me-2"></i> Orders</a></li>
        <li><a href="cart.html" class="nav-link"><i class="fas fa-shopping-cart me-2"></i> Cart</a></li>
        <li><a href="wishlist.html" class="nav-link"><i class="fas fa-heart me-2"></i> Wishlist</a></li>
        <li><a href="saved.html" class="nav-link"><i class="fas fa-bookmark me-2"></i> Saved</a></li>
      </ul>
    </aside>

    <!-- Main -->
    <main class="col-md-9 col-lg-10 p-4">
      <!-- Welcome -->
      <div class="mb-4 animate__animated animate__fadeIn d-flex align-items-center gap-3">
        <div id="welcome-avatar" class="rounded-circle border d-flex align-items-center justify-content-center bg-success text-white fw-bold" style="width:60px; height:60px; font-size:1.2rem;"></div>
        <div>
          <h2 class="fw-bold mb-1">Hi <span id="welcome-user">User</span> ðŸ‘‹</h2>
          <p class="text-muted">Welcome to your professional dashboard. Manage your rentals and discover new cars.</p>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="row g-3 mb-4" data-aos="fade-up">
        <div class="col-md-4"><div class="card text-center p-3 shadow-sm"><i class="fas fa-shopping-cart text-success fa-2x mb-2"></i><h6>Cart</h6><p id="stat-cart">0 items</p></div></div>
        <div class="col-md-4"><div class="card text-center p-3 shadow-sm"><i class="fas fa-heart text-danger fa-2x mb-2"></i><h6>Wishlist</h6><p id="stat-wishlist">0 items</p></div></div>
        <div class="col-md-4"><div class="card text-center p-3 shadow-sm"><i class="fas fa-bookmark text-warning fa-2x mb-2"></i><h6>Saved Cars</h6><p id="stat-saved">0 items</p></div></div>
      </div>

      <!-- Recommended -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold">Recommended for You</h5>
        <div class="row g-3" id="recommended-cars"></div>
      </div>

      <!-- Recent Rentals -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold">Recent Rentals</h5>
        <ul class="list-group" id="recent-rentals"></ul>
      </div>
    </main>
  </div>
</div>

<!-- Toast -->
<div class="toast position-fixed bottom-0 end-0 m-3" id="toast"><div class="toast-body"></div></div>

<!-- Footer -->
<footer class="bg-dark text-light text-center py-3">&copy; 2025 Silas Car Rentals. All Rights Reserved.</footer>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
AOS.init();

const get=(k)=>JSON.parse(localStorage.getItem(k))||[];

function updateCounts(){
 document.getElementById("cart-count").textContent=get("cart").length;
 document.getElementById("wishlist-count").textContent=get("wishlist").length;
 document.getElementById("saved-count").textContent=get("savedCars").length;
 document.getElementById("stat-cart").textContent=`${get("cart").length} items`;
 document.getElementById("stat-wishlist").textContent=`${get("wishlist").length} items`;
 document.getElementById("stat-saved").textContent=`${get("savedCars").length} items`;
}

// Personalized welcome with avatar + initials
document.addEventListener("DOMContentLoaded",()=>{
 if(!localStorage.getItem("user")) return window.location="login.html";
 let user=JSON.parse(localStorage.getItem("user"));
 let fullName=user?.name || "User";
 let firstName=fullName.split(" ")[0];
 let initials=fullName.split(" ").map(n=>n[0]).join("").substring(0,2).toUpperCase();

 // Greeting
 document.getElementById("user-name").textContent=fullName;
 document.getElementById("welcome-user").textContent=firstName;

 // Avatars (fallback to initials if no avatar URL)
 if(user?.avatar){
   document.getElementById("nav-avatar").innerHTML=`<img src="${user.avatar}" class="rounded-circle" style="width:32px;height:32px;object-fit:cover;">`;
   document.getElementById("welcome-avatar").innerHTML=`<img src="${user.avatar}" class="rounded-circle border" style="width:60px;height:60px;object-fit:cover;">`;
 } else {
   document.getElementById("nav-avatar").textContent=initials;
   document.getElementById("welcome-avatar").textContent=initials;
 }

 updateCounts();
});

// Logout
document.getElementById("logout-button").addEventListener("click",()=>{
 localStorage.clear(); window.location="login.html";
});

// Theme toggle
const themeBtn=document.getElementById("theme-toggle");
themeBtn.addEventListener("click",()=>{
 let body=document.body;
 let newTheme=body.getAttribute("data-bs-theme")==="dark"?"light":"dark";
 body.setAttribute("data-bs-theme",newTheme);
 themeBtn.innerHTML=newTheme==="dark"?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>';
 localStorage.setItem("theme",newTheme);
});
const savedTheme=localStorage.getItem("theme")||"light";
document.body.setAttribute("data-bs-theme",savedTheme);
themeBtn.innerHTML=savedTheme==="dark"?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>';
</script>
</body>
</html>
