<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Silas Car Rentals - Dashboard</title>

  <!-- Bootstrap 5.3.2 (Responsive & Mobile-first) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <!-- Animate.css -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="header.css">
  <style>
    :root {
      /* Light Theme Variables */
      --light-primary: #0d9488;
      --light-primary-700: #0f766e;
      --light-text: #374151;
      --light-muted: #6b7280;
      --light-border: #e5e7eb;
      --light-shadow: 0 4px 20px rgba(0,0,0,0.08);
      --light-bg: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      --light-card-bg: #ffffff;
      --light-accent: #f59e0b;

      /* Dark Theme Variables */
      --dark-primary: #14b8a6;
      --dark-primary-700: #0d9488;
      --dark-text: #e5e7eb;
      --dark-muted: #9ca3af;
      --dark-border: #374151;
      --dark-shadow: 0 4px 20px rgba(0,0,0,0.3);
      --dark-bg: linear-gradient(135deg, #111827 0%, #1f2937 100%);
      --dark-card-bg: #1f2937;
      --dark-accent: #fbbf24;

      /* Common Variables */
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      --elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Light theme */
    body[data-bs-theme="light"] {
      background: var(--light-bg);
      min-height: 100vh;
      transition: var(--transition);
      color: var(--light-text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Dark theme */
    body[data-bs-theme="dark"] {
      background: var(--dark-bg);
      min-height: 100vh;
      transition: var(--transition);
      color: var(--dark-text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Header Styles */
    .main-header {
      background: linear-gradient(135deg, var(--light-primary) 0%, var(--light-primary-700) 100%);
      padding: 1rem 0;
      box-shadow: var(--light-shadow);
      border-bottom: 3px solid rgba(13, 148, 136, 0.2);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    body[data-bs-theme="dark"] .main-header {
      background: linear-gradient(135deg, var(--dark-primary) 0%, var(--dark-primary-700) 100%);
      box-shadow: var(--dark-shadow);
      border-bottom: 3px solid rgba(20, 184, 166, 0.3);
    }

    .main-header.scrolled {
      box-shadow: 0 4px 30px rgba(0,0,0,0.15);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transform: translateY(0);
    }

    body[data-bs-theme="dark"] .main-header.scrolled {
      box-shadow: 0 4px 30px rgba(0,0,0,0.4);
    }

    .brand {
      color: white;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.5rem;
      transition: var(--transition);
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .brand:hover {
      transform: scale(1.05) rotate(1deg);
      text-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .nav-link {
      color: rgba(255,255,255,0.9) !important;
      font-weight: 600;
      transition: var(--transition);
      padding: 0.5rem 1rem !important;
      border-radius: 6px;
      position: relative;
      overflow: hidden;
    }

    .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.1);
      transition: left 0.3s ease;
    }

    .nav-link:hover::before,
    .nav-link.active::before {
      left: 0;
    }

    .nav-link:hover,
    .nav-link.active {
      color: white !important;
      transform: translateY(-2px);
    }

    /* Theme Toggle */
    .theme-toggle {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.2);
      color: white;
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .theme-toggle::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      transition: width 0.3s ease, height 0.3s ease;
      transform: translate(-50%, -50%);
    }

    .theme-toggle:hover::before {
      width: 100%;
      height: 100%;
    }

    .theme-toggle:hover {
      transform: scale(1.1) rotate(180deg);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Welcome Section */
    .welcome-section {
      background: var(--light-card-bg);
      padding: 2rem;
      border-radius: 16px;
      box-shadow: var(--light-shadow);
      margin: 2rem 0;
      border: 1px solid var(--light-border);
    }

    body[data-bs-theme="dark"] .welcome-section {
      background: var(--dark-card-bg);
      box-shadow: var(--dark-shadow);
      border-color: var(--dark-border);
    }

    /* Cards */
    .card {
      background: var(--light-card-bg);
      border: 1px solid var(--light-border);
      box-shadow: var(--light-shadow);
      transition: var(--transition);
    }

    body[data-bs-theme="dark"] .card {
      background: var(--dark-card-bg);
      border-color: var(--dark-border);
      box-shadow: var(--dark-shadow);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    body[data-bs-theme="dark"] .card:hover {
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    /* Buttons */
    .btn-success {
      background: linear-gradient(135deg, var(--light-primary) 0%, var(--light-primary-700) 100%);
      border: none;
      transition: var(--transition);
      box-shadow: 0 4px 15px rgba(13, 148, 136, 0.3);
    }

    .btn-success:hover {
      background: linear-gradient(135deg, var(--light-primary-700) 0%, var(--light-primary) 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4);
    }

    body[data-bs-theme="dark"] .btn-success {
      background: linear-gradient(135deg, var(--dark-primary) 0%, var(--dark-primary-700) 100%);
      box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
    }

    body[data-bs-theme="dark"] .btn-success:hover {
      box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
    }

    .btn-outline-success {
      border-color: var(--light-primary);
      color: var(--light-primary);
      transition: var(--transition);
    }

    .btn-outline-success:hover {
      background: var(--light-primary);
      border-color: var(--light-primary);
      color: white;
      transform: translateY(-2px);
    }

    body[data-bs-theme="dark"] .btn-outline-success {
      border-color: var(--dark-primary);
      color: var(--dark-primary);
    }

    body[data-bs-theme="dark"] .btn-outline-success:hover {
      background: var(--dark-primary);
      border-color: var(--dark-primary);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--light-primary) 0%, var(--light-primary-700) 100%);
      border: none;
      transition: var(--transition);
      box-shadow: 0 4px 15px rgba(13, 148, 136, 0.3);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, var(--light-primary-700) 0%, var(--light-primary) 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4);
    }

    body[data-bs-theme="dark"] .btn-primary {
      background: linear-gradient(135deg, var(--dark-primary) 0%, var(--dark-primary-700) 100%);
      box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
    }

    body[data-bs-theme="dark"] .btn-primary:hover {
      box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
    }

    /* Text colors */
    .text-success {
      color: var(--light-primary) !important;
    }

    body[data-bs-theme="dark"] .text-success {
      color: var(--dark-primary) !important;
    }

    .text-muted {
      color: var(--light-muted) !important;
    }

    body[data-bs-theme="dark"] .text-muted {
      color: var(--dark-muted) !important;
    }

    /* Background colors */
    .bg-success {
      background: var(--light-primary) !important;
    }

    body[data-bs-theme="dark"] .bg-success {
      background: var(--dark-primary) !important;
    }

    /* Badges */
    .badge.bg-success {
      background: var(--light-primary) !important;
    }

    body[data-bs-theme="dark"] .badge.bg-success {
      background: var(--dark-primary) !important;
    }

    /* Mobile responsiveness adjustments */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 2.5rem;
      }

      .hero-subtitle {
        font-size: 1.1rem;
      }

      .hero-buttons {
        flex-direction: column;
        align-items: center;
      }

      .about-content {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .services-grid {
        grid-template-columns: 1fr;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .car-specs {
        gap: 0.5rem;
      }

      .spec-item {
        font-size: 0.8rem;
        padding: 0.2rem 0.4rem;
      }

      .car-actions {
        flex-direction: column;
        gap: 0.5rem;
      }

      .view-more-stats {
        gap: 1rem;
      }

      .stat-number {
        font-size: 1.25rem;
      }

      #welcome-avatar {
        width: 50px !important;
        height: 50px !important;
        font-size: 1rem !important;
      }
      .card-img-top {
        height: 200px;
        object-fit: cover;
      }
      .navbar .d-flex.align-items-center.gap-3 {
        gap: 0.25rem !important; /* Reduced gap for better balance */
      }
      .navbar .btn {
        padding: 0.25rem 0.375rem; /* Smaller padding */
        font-size: 0.8rem; /* Smaller font */
      }
      .navbar .badge {
        font-size: 0.7rem; /* Smaller badge */
        padding: 0.2em 0.4em; /* Adjust badge padding */
      }
      .navbar-brand {
        font-size: 1.1rem; /* Slightly smaller brand */
      }
      #nav-avatar {
        width: 28px !important;
        height: 28px !important;
        font-size: 0.8rem !important;
      }
      .dropdown-menu {
        min-width: 150px; /* Narrower dropdown */
      }
      /* Balance header: Center brand, distribute right elements evenly */
      .navbar .container-fluid {
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
      }
      .navbar-brand {
        flex: 1;
        text-align: center;
        order: 2;
      }
      .navbar .ms-auto.d-flex.align-items-center.gap-3 {
        flex: 1;
        justify-content: space-around;
        order: 3;
        gap: 0.5rem !important;
      }
      .navbar .d-none.d-md-flex {
        order: 1;
        flex: 1;
        justify-content: flex-start;
      }
      .navbar .btn-outline-success.d-lg-none {
        order: 0;
      }

      /* Home-specific mobile adjustments */
      .welcome-section {
        padding: 1.5rem;
      }

      .search-bar-filters {
        flex-direction: column;
        align-items: stretch;
      }

      .search-bar-filters input,
      .search-bar-filters select {
        flex: 1;
        margin-bottom: 0.5rem;
      }

      .promo-carousel .carousel-item {
        padding: 1rem;
      }

      .quick-stats .col-md-3 {
        margin-bottom: 1rem;
      }

      .quick-booking .col-md-6 {
        margin-bottom: 1rem;
      }

      .recommended-cars .col-md-4 {
        margin-bottom: 1.5rem;
      }

      .testimonials .col-md-4 {
        margin-bottom: 1.5rem;
      }

      .activity-feed .activity-item {
        padding: 1rem 0;
      }

      .faq-accordion .accordion-item {
        margin-bottom: 0.5rem;
      }

      .newsletter .input-group {
        flex-direction: column;
      }

      .newsletter .input-group input {
        margin-bottom: 0.5rem;
      }

      .social-media .btn {
        margin-bottom: 0.5rem;
      }

      .locations .col-md-4 {
        margin-bottom: 1rem;
      }

      .contact-widget .col-md-6 {
        margin-bottom: 1.5rem;
      }

      .loyalty-program .col-md-8,
      .loyalty-program .col-md-4 {
        margin-bottom: 1rem;
      }
    }
    @media (max-width: 576px) {
      .navbar-brand {
        font-size: 1rem;
      }
      #welcome-user {
        font-size: 1.25rem;
      }
      .card-body.d-flex.flex-column .btn {
        font-size: 0.875rem;
      }
      .quick-stats .card {
        padding: 1rem 0.5rem;
      }
      .quick-stats .card i {
        font-size: 1.5rem;
      }
      .navbar .d-flex.align-items-center {
        flex-wrap: wrap; /* Allow wrapping if needed */
        justify-content: space-around; /* Distribute evenly */
        gap: 0.25rem !important;
      }
      .navbar .btn {
        padding: 0.2rem 0.3rem;
        font-size: 0.75rem;
      }
      .navbar .badge {
        font-size: 0.65rem;
        padding: 0.15em 0.3em;
      }
      #nav-avatar {
        width: 24px !important;
        height: 24px !important;
        font-size: 0.7rem !important;
      }
      .dropdown-menu {
        min-width: 120px;
      }
      /* Further balance: Stack elements if needed */
      .navbar .container-fluid {
        flex-direction: column;
        align-items: stretch;
      }
      .navbar-brand {
        text-align: center;
        margin-bottom: 0.5rem;
      }
      .navbar .ms-auto.d-flex.align-items-center.gap-3 {
        justify-content: center;
        flex-wrap: wrap;
      }

      /* Home-specific mobile adjustments */
      .welcome-section h2 {
        font-size: 1.5rem;
      }

      .welcome-section p {
        font-size: 0.9rem;
      }

      .search-bar-card h5 {
        font-size: 1.1rem;
      }

      .promo-carousel h5 {
        font-size: 1.2rem;
      }

      .promo-carousel p {
        font-size: 0.9rem;
      }

      .stats-dashboard h6 {
        font-size: 0.9rem;
      }

      .quick-booking h5 {
        font-size: 1.1rem;
      }

      .recommended-cars h5 {
        font-size: 1.1rem;
      }

      .testimonials h5 {
        font-size: 1.1rem;
      }

      .activity-feed h5 {
        font-size: 1.1rem;
      }

      .faq h5 {
        font-size: 1.1rem;
      }

      .newsletter h5 {
        font-size: 1.1rem;
      }

      .social-media h5 {
        font-size: 1.1rem;
      }

      .locations h5 {
        font-size: 1.1rem;
      }

      .contact-widget h5 {
        font-size: 1.1rem;
      }

      .loyalty-program h5 {
        font-size: 1.1rem;
      }
    }
    @media (max-width: 480px) {
      .navbar-brand {
        font-size: 0.9rem;
      }
      .navbar .d-flex.align-items-center.gap-3 {
        gap: 0.1rem !important;
      }
      .navbar .btn {
        padding: 0.15rem 0.25rem;
        font-size: 0.7rem;
      }
      .navbar .badge {
        font-size: 0.6rem;
        padding: 0.1em 0.25em;
      }
      #nav-avatar {
        width: 20px !important;
        height: 20px !important;
        font-size: 0.6rem !important;
      }
      .dropdown-menu {
        min-width: 100px;
        font-size: 0.8rem;
      }
      .dropdown-item {
        padding: 0.25rem 0.5rem;
      }
      /* Compact and balanced: Minimize gaps, center align */
      .navbar .container-fluid {
        padding: 0.5rem;
      }
      .navbar .ms-auto.d-flex.align-items-center.gap-3 {
        justify-content: space-between;
        gap: 0 !important;
      }
      .navbar .btn {
        min-width: 2rem;
      }

      /* Home-specific mobile adjustments */
      .welcome-section {
        padding: 1rem;
      }

      .search-bar-filters input,
      .search-bar-filters select,
      .search-bar-filters button {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .promo-carousel .card-body {
        padding: 1rem 0.5rem;
      }

      .quick-stats .card {
        padding: 0.75rem 0.5rem;
      }

      .quick-stats .card i {
        font-size: 1.25rem;
      }

      .quick-stats .card h6 {
        font-size: 0.8rem;
      }

      .quick-stats .card p {
        font-size: 0.8rem;
      }

      .quick-booking .form-control,
      .quick-booking .form-select {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .recommended-cars .card-body h6 {
        font-size: 0.9rem;
      }

      .recommended-cars .card-body p {
        font-size: 0.9rem;
      }

      .recommended-cars .badge {
        font-size: 0.7rem;
      }

      .testimonials .card-body h6 {
        font-size: 0.9rem;
      }

      .testimonials .card-body p {
        font-size: 0.85rem;
      }

      .activity-feed .activity-item p {
        font-size: 0.9rem;
      }

      .activity-feed .activity-item small {
        font-size: 0.8rem;
      }

      .faq .accordion-button {
        font-size: 0.9rem;
        padding: 0.75rem 1rem;
      }

      .faq .accordion-body {
        font-size: 0.85rem;
        padding: 0.5rem 1rem;
      }

      .newsletter .card-body h5 {
        font-size: 1rem;
      }

      .newsletter .card-body p {
        font-size: 0.85rem;
      }

      .newsletter .form-control {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .newsletter .btn {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .social-media .btn {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
      }

      .locations .card-body h6 {
        font-size: 0.9rem;
      }

      .locations .card-body p {
        font-size: 0.85rem;
      }

      .contact-widget .card-body h6 {
        font-size: 0.9rem;
      }

      .contact-widget .card-body p {
        font-size: 0.85rem;
      }

      .contact-widget .form-control {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .contact-widget .btn {
        font-size: 0.9rem;
        padding: 0.5rem;
      }

      .loyalty-program .card-body h6 {
        font-size: 0.9rem;
      }

      .loyalty-program .card-body p {
        font-size: 0.85rem;
      }

      .loyalty-program .progress {
        height: 0.5rem;
      }

      .loyalty-program small {
        font-size: 0.8rem;
      }

      .loyalty-program h4 {
        font-size: 1.1rem;
      }
    }

    /* Search bar filters layout */
    .search-bar-filters {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    @media (max-width: 768px) {
      .search-bar-filters {
        flex-direction: column;
        align-items: stretch;
      }
      .search-bar-filters input,
      .search-bar-filters select {
        flex: 1;
      }
    }

    /* Professional Section Theme Support */
    .professional-section {
      background: var(--light-card-bg);
      border: 1px solid var(--light-border);
      box-shadow: var(--light-shadow);
    }

    body[data-bs-theme="dark"] .professional-section {
      background: var(--dark-card-bg);
      border-color: var(--dark-border);
      box-shadow: var(--dark-shadow);
    }

    /* Improve text visibility in dark theme for professional section */
    body[data-bs-theme="dark"] .professional-section .text-muted {
      color: #e2e8f0 !important;
    }

    /* Balance car images and details in Recommended section */
    .card-img-top {
      height: 200px;
      object-fit: cover;
    }
  </style>
</head>
<body style="font-family:'Inter',sans-serif;">

<!-- Header -->
<header class="main-header">
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <!-- Sidebar toggle button for mobile -->
      <button class="btn btn-outline-success d-lg-none me-2" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-label="Open menu" title="Open menu">
        <i class="fas fa-bars"></i>
      </button>

      <a href="home.html" class="navbar-brand brand"><i class="fas fa-car me-2"></i>Silas Car Rentals</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" title="Toggle navigation" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#home">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#services">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#contact">Contact</a>
          </li>
        </ul>

        <div class="ms-auto d-flex align-items-center gap-3">
          <!-- Notifications -->
          <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-label="Notifications" title="Notifications"><i class="fas fa-bell"></i></button>
            <ul class="dropdown-menu dropdown-menu-end" id="notifications">
              <li class="dropdown-header fw-bold">Notifications</li>
              <li><a class="dropdown-item" href="#">🚗 New BMW X5 added to fleet</a></li>
              <li><a class="dropdown-item" href="#">🔥 20% off luxury rentals this week</a></li>
              <li><a class="dropdown-item" href="#">✅ Your booking was confirmed</a></li>
            </ul>
          </div>
          <!-- Counters -->
          <a href="cart.html" class="btn btn-outline-primary position-relative" aria-label="Cart">
            <i class="fas fa-shopping-cart"></i>
            <span id="cart-count" class="badge bg-success position-absolute top-0 start-100 translate-middle">0</span>
          </a>
          <a href="wishlist.html" class="btn btn-outline-danger position-relative" aria-label="Wishlist">
            <i class="fas fa-heart"></i>
            <span id="wishlist-count" class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
          </a>
          <a href="saved.html" class="btn btn-outline-warning position-relative" aria-label="Saved">
            <i class="fas fa-bookmark"></i>
            <span id="saved-count" class="badge bg-warning position-absolute top-0 start-100 translate-middle">0</span>
          </a>
          <!-- Theme -->
          <button class="theme-toggle ms-3" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
            <i class="fas fa-moon" aria-hidden="true"></i>
            <span class="sr-only">Toggle theme</span>
          </button>
          <!-- Profile -->
          <div class="dropdown">
            <button class="btn btn-success dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown" aria-label="Profile menu" title="Profile menu">
              <div id="nav-avatar" class="rounded-circle me-2 d-flex align-items-center justify-content-center bg-success text-white fw-bold" style="width:32px; height:32px; font-size:0.9rem;"></div>
              <span id="user-name">User</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="profile.html"><i class="fas fa-user me-2"></i>Profile</a></li>
              <li><a class="dropdown-item" href="orders.html"><i class="fas fa-box me-2"></i>My Orders</a></li>
              <li><button class="dropdown-item text-danger" id="logout-button"><i class="fas fa-sign-out-alt me-2"></i>Logout</button></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar Offcanvas -->
    <div class="offcanvas offcanvas-start sidebar" tabindex="-1" id="sidebarMenu">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold text-success"><i class="fas fa-car me-2"></i>Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" title="Close menu"></button>
      </div>
      <div class="offcanvas-body p-3">
        <h6 class="text-muted mb-3">Dashboard</h6>
        <ul class="nav flex-column gap-2" id="sidebar-links"></ul>
      </div>
    </div>

    <!-- Sidebar Desktop -->
    <aside class="col-md-3 col-lg-2 sidebar min-vh-100 p-3 d-none d-lg-block">
      <h6 class="text-muted mb-3">Dashboard</h6>
      <ul class="nav flex-column gap-2" id="sidebar-links-desktop"></ul>
    </aside>

    <!-- Main -->
    <main class="col-md-9 col-lg-10 p-4 main">
      <!-- Welcome -->
      <div id="home" class="mb-4 animate__animated animate__fadeIn d-flex align-items-center gap-3 welcome-section">
        <div id="welcome-avatar" class="rounded-circle border d-flex align-items-center justify-content-center bg-success text-white fw-bold" style="width:60px; height:60px; font-size:1.2rem;"></div>
        <div>
          <h2 class="fw-bold mb-1"> Hello <span id="welcome-user"></span> 👋</h2>
          <p class="text-muted">Welcome to your professional dashboard. Manage your rentals and discover new cars.</p>
        </div>
      </div>

      <!-- Search Bar for Cars -->
      <div class="search-bar-card mb-4" data-aos="fade-up">
        <h5 class="fw-bold mb-3">Search & Filter Cars</h5>
        <div class="search-bar-filters">
          <input type="text" id="search-input" class="form-control" placeholder="Search by name or tags..." style="flex: 2;" aria-label="Search cars">
          <select id="price-filter" class="form-select" aria-label="Filter by price">
            <option value="">All Prices</option>
            <option value="0-20000">Under ₦20,000</option>
            <option value="20000-40000">₦20,000 - ₦40,000</option>
            <option value="40000-60000">₦40,000 - ₦60,000</option>
            <option value="60000+">Over ₦60,000</option>
          </select>
          <select id="type-filter" class="form-select" aria-label="Filter by type">
            <option value="">All Types</option>
            <option value="sedan">Sedan</option>
            <option value="suv">SUV</option>
            <option value="luxury">Luxury</option>
            <option value="sports">Sports</option>
          </select>
          <select id="location-filter" class="form-select" aria-label="Filter by location">
            <option value="">All Locations</option>
            <option value="lagos">Lagos</option>
            <option value="abuja">Abuja</option>
            <option value="port-harcourt">Port Harcourt</option>
          </select>
          <button class="btn btn-success" id="search-btn"><i class="fas fa-search me-2"></i>Search</button>
        </div>
      </div>

      <!-- Promotional Banners/Deals Section -->
      <div class="mb-4" data-aos="fade-up">
        <div id="promo-carousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="card text-white bg-primary">
                <div class="card-body text-center">
                  <h5 class="card-title">🔥 20% Off Luxury Rentals!</h5>
                  <p class="card-text">Book now and save on premium vehicles this week.</p>
                  <a href="cars.html" class="btn btn-light">Browse Deals</a>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="card text-white bg-success">
                <div class="card-body text-center">
                  <h5 class="card-title">🚗 New BMW X5 Added!</h5>
                  <p class="card-text">Experience luxury on wheels with our latest addition.</p>
                  <a href="cars.html" class="btn btn-light">View Car</a>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="card text-white bg-warning">
                <div class="card-body text-center">
                  <h5 class="card-title">🎁 Loyalty Rewards!</h5>
                  <p class="card-text">Earn points on every rental and redeem for free days.</p>
                  <a href="#loyalty" class="btn btn-dark">Learn More</a>
                </div>
              </div>
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#promo-carousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#promo-carousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>

      <!-- Enhanced Stats Dashboard -->
      <div class="row g-3 mb-4" data-aos="fade-up">
        <div class="col-md-3"><div class="card text-center p-3 shadow-sm"><i class="fas fa-shopping-cart text-success fa-2x mb-2"></i><h6>Cart</h6><p id="stat-cart">0 items</p></div></div>
        <div class="col-md-3"><div class="card text-center p-3 shadow-sm"><i class="fas fa-heart text-danger fa-2x mb-2"></i><h6>Wishlist</h6><p id="stat-wishlist">0 items</p></div></div>
        <div class="col-md-3"><div class="card text-center p-3 shadow-sm"><i class="fas fa-bookmark text-warning fa-2x mb-2"></i><h6>Saved Cars</h6><p id="stat-saved">0 items</p></div></div>
        <div class="col-md-3"><div class="card text-center p-3 shadow-sm"><i class="fas fa-coins text-warning fa-2x mb-2"></i><h6>Loyalty Points</h6><p id="stat-points">0 pts</p></div></div>
      </div>

      <!-- Quick Booking Widget -->
      <!-- Removed Quick Booking section as requested -->

      <!-- Professional Replacement Section -->
      <div id="services" class="professional-section mb-4 p-4 rounded shadow-sm" data-aos="fade-up">
        <h5 class="fw-bold mb-3">Why Choose Silas Car Rentals?</h5>
        <div class="row text-center">
          <div class="col-md-4 mb-3">
            <i class="fas fa-shield-alt fa-3x text-success mb-2"></i>
            <h6>Trusted & Secure</h6>
            <p class="text-muted">We prioritize your safety with verified vehicles and secure transactions.</p>
          </div>
          <div class="col-md-4 mb-3">
            <i class="fas fa-car-side fa-3x text-success mb-2"></i>
            <h6>Wide Selection</h6>
            <p class="text-muted">Choose from a diverse fleet of cars to suit your style and needs.</p>
          </div>
          <div class="col-md-4 mb-3">
            <i class="fas fa-headset fa-3x text-success mb-2"></i>
            <h6>24/7 Support</h6>
            <p class="text-muted">Our dedicated support team is here to assist you anytime, anywhere.</p>
          </div>
        </div>
      </div>



      <!-- Recommended -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Recommended for You</h5>
        <div class="row g-3" id="recommended-cars"></div>
        <div class="text-center mt-3">
          <a href="perfect-cars.html" class="btn btn-primary">View More Cars</a>
        </div>
      </div>

      <!-- Testimonials -->
      <div id="about" class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">What Our Customers Say</h5>
        <div class="row g-3">
          <div class="col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="mb-3">
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                </div>
                <p class="card-text">"Excellent service! The car was in perfect condition and the booking process was seamless."</p>
                <h6 class="card-title fw-bold">John Doe</h6>
                <small class="text-muted">Lagos, Nigeria</small>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="mb-3">
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star-half-alt text-warning"></i>
                </div>
                <p class="card-text">"Great variety of cars and competitive prices. Will definitely rent again!"</p>
                <h6 class="card-title fw-bold">Jane Smith</h6>
                <small class="text-muted">Abuja, Nigeria</small>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="mb-3">
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                </div>
                <p class="card-text">"Professional staff and well-maintained vehicles. Highly recommended!"</p>
                <h6 class="card-title fw-bold">Mike Johnson</h6>
                <small class="text-muted">Port Harcourt, Nigeria</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity Feed -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Recent Activity</h5>
        <div class="card">
          <div class="card-body">
            <div class="activity-item d-flex align-items-center mb-3">
              <div class="activity-icon bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width:40px; height:40px;">
                <i class="fas fa-car"></i>
              </div>
              <div>
                <p class="mb-0 fw-bold">New BMW X5 added to fleet</p>
                <small class="text-muted">2 hours ago</small>
              </div>
            </div>
            <div class="activity-item d-flex align-items-center mb-3">
              <div class="activity-icon bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width:40px; height:40px;">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <p class="mb-0 fw-bold">John Doe completed a rental</p>
                <small class="text-muted">5 hours ago</small>
              </div>
            </div>
            <div class="activity-item d-flex align-items-center">
              <div class="activity-icon bg-warning text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width:40px; height:40px;">
                <i class="fas fa-gift"></i>
              </div>
              <div>
                <p class="mb-0 fw-bold">New loyalty program launched</p>
                <small class="text-muted">1 day ago</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- FAQ -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Frequently Asked Questions</h5>
        <div class="accordion" id="faqAccordion">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="true" aria-controls="faq1">
                How do I book a car?
              </button>
            </h2>
            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                You can book a car by selecting your preferred vehicle, choosing pickup and return dates, and completing the booking form. Payment is processed securely online.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2" aria-expanded="false" aria-controls="faq2">
                What documents do I need to rent a car?
              </button>
            </h2>
            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                You'll need a valid driver's license, international driving permit (if applicable), and a credit card for the security deposit.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3" aria-expanded="false" aria-controls="faq3">
                Is there a minimum age requirement?
              </button>
            </h2>
            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Yes, you must be at least 21 years old to rent a car. Additional fees may apply for drivers under 25.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4" aria-expanded="false" aria-controls="faq4">
                What is your cancellation policy?
              </button>
            </h2>
            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                Free cancellation up to 24 hours before pickup. Cancellations within 24 hours may incur a fee.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Newsletter -->
      <div class="mb-4" data-aos="fade-up">
        <div class="card bg-primary text-white">
          <div class="card-body text-center">
            <h5 class="card-title">Stay Updated</h5>
            <p class="card-text">Subscribe to our newsletter for the latest deals and updates.</p>
            <div class="row justify-content-center">
              <div class="col-md-6">
                <div class="input-group">
          <input type="email" class="form-control" id="home-newsletter-email" placeholder="Enter your email" aria-label="Email for newsletter">
          <button class="btn btn-light" type="button" id="home-newsletter-subscribe">Subscribe</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Social Media -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Follow Us</h5>
        <div class="d-flex justify-content-center gap-3">
          <a href="#" class="btn btn-outline-primary btn-lg"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="btn btn-outline-info btn-lg"><i class="fab fa-twitter"></i></a>
          <a href="#" class="btn btn-outline-danger btn-lg"><i class="fab fa-instagram"></i></a>
          <a href="#" class="btn btn-outline-primary btn-lg"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>

      <!-- Map -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Our Locations</h5>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-md-4">
                <h6>Lagos</h6>
                <p>Ikeja, Lagos<br>Phone: +234 810 758 6167</p>
              </div>
              <div class="col-md-4">
                <h6>Abuja</h6>
                <p>Wuse II, Abuja<br>Phone: +234 810 758 6167</p>
              </div>
              <div class="col-md-4">
                <h6>Port Harcourt</h6>
                <p>GRA Phase 2, Port Harcourt<br>Phone: +234 810 758 6167</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Widget -->
      <div id="contact" class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Contact Us</h5>
        <div class="row">
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h6>Quick Contact</h6>
                <p><i class="fas fa-phone me-2"></i>+234 810 758 6167</p>
                <p><i class="fas fa-envelope me-2"></i>silasonyekachi15@gmail.com</p>
                <p><i class="fas fa-clock me-2"></i>Mon-Fri: 8AM-6PM</p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h6>Send Message</h6>
                <form>
                  <div class="mb-3">
                    <input type="text" class="form-control" placeholder="Your Name">
                  </div>
                  <div class="mb-3">
                    <input type="email" class="form-control" placeholder="Your Email">
                  </div>
                  <div class="mb-3">
                    <textarea class="form-control" rows="3" placeholder="Your Message"></textarea>
                  </div>
                  <button type="submit" class="btn btn-primary">Send</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Loyalty Program -->
      <div class="mb-4" data-aos="fade-up">
        <h5 class="fw-bold section-title">Loyalty Program</h5>
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-md-8">
                <h6>Earn Points on Every Rental</h6>
                <p>Earn 1 point for every ₦1,000 spent. Redeem points for free rental days!</p>
                <div class="progress mb-3">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <small class="text-muted">650 / 1000 points to next reward</small>
              </div>
              <div class="col-md-4 text-center">
                <div class="loyalty-points">
                  <i class="fas fa-coins fa-3x text-warning mb-2"></i>
                  <h4 class="text-success">650 pts</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Rentals -->
      <div class="mb-4" data-aos="fade-up">
        <ul class="list-group" id="recent-rentals"></ul>
      </div>
    </main>
  </div>
</div>

<!-- Toast -->
<div class="toast position-fixed bottom-0 end-0 m-3" id="toast"><div class="toast-body"></div></div>

<!-- Footer -->
<footer class="bg-dark text-light text-center py-3">&copy; 2025 Silas Car Rentals. All Rights Reserved.</footer>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
AOS.init();

const API_BASE = "https://techyjaunt-auth-go43.onrender.com";

const get=(k)=>JSON.parse(localStorage.getItem(k))||[];

// Sidebar links config
const sidebarLinks = [
  {href:"profile.html", icon:"fa-user", text:"Profile"},
  {href:"orders.html", icon:"fa-box", text:"Orders"},
  {href:"cart.html", icon:"fa-shopping-cart", text:"Cart"},
  {href:"wishlist.html", icon:"fa-heart", text:"Wishlist"},
  {href:"saved.html", icon:"fa-bookmark", text:"Saved"}
];

// Render sidebar with active state
function renderSidebar() {
  const current = window.location.pathname.split("/").pop();
  const linksHtml = sidebarLinks.map(l=>{
    const active = current===l.href ? "active fw-bold text-success" : "";
    return `<li><a href="${l.href}" class="nav-link ${active}"><i class="fas ${l.icon} me-2"></i>${l.text}</a></li>`;
  }).join("");
  document.getElementById("sidebar-links").innerHTML=linksHtml;
  document.getElementById("sidebar-links-desktop").innerHTML=linksHtml;
}

// Cars array
const cars = [
  { name:"Mercedes-Benz C300", price:45000, image:"https://vehicle-images.dealerinspire.com/a1a7-11002896/W1KAF4GB4SR252999/00f2d6ad30e089cb5c02791d58c3af6a.jpg", tags:["Automatic","Premium","4 Seats"], available:true },
  { name:"Toyota Camry 2023", price:25000, image:"https://images.unsplash.com/photo-1549399542-7e3f8b79c341?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", tags:["Automatic","Executive","5 Seats"], available:true },
  { name:"BMW X5 Luxury", price:65000, image:"https://images.unsplash.com/photo-1544636331-e26879cd4d9b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", tags:["Automatic","Luxury","7 Seats"], available:false }
];

// Render Recommended Cars
function renderRecommendedCars(filteredCars = cars) {
  const container=document.getElementById("recommended-cars");
  container.innerHTML="";
  if(!filteredCars.length){
    container.innerHTML="<p class='text-muted'>No cars match your search criteria.</p>";
    return;
  }

  let wishlist=get("wishlist");
  let savedCars=get("savedCars");

  filteredCars.forEach((car,i)=>{
    const badge=car.available?`<span class="badge bg-success">Available</span>`:`<span class="badge bg-warning">Limited</span>`;
    const tags=car.tags.map(t=>`<span class="badge bg-light text-dark me-1">${t}</span>`).join("");
    const wishActive=wishlist.includes(car.name)?"text-danger":"text-muted";
    const saveActive=savedCars.includes(car.name)?"text-warning":"text-muted";

    container.innerHTML+=`
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="${i*100}">
        <div class="card h-100 shadow-sm">
          <div class="position-relative">
            <img src="${car.image}" class="card-img-top" alt="${car.name}" loading="lazy">
            <div class="position-absolute top-0 end-0 m-2">${badge}</div>
          </div>
          <div class="card-body d-flex flex-column">
            <h6 class="fw-bold">${car.name}</h6>
            <p class="text-success fw-bold">₦${car.price.toLocaleString()}/day</p>
            <div class="mb-2">${tags}</div>
            <div class="d-flex justify-content-between mt-auto">
              <button class="btn btn-sm btn-success flex-grow-1 me-2" onclick="addToCart('${car.name}')" aria-label="Add to cart">
                <i class="fas fa-shopping-cart me-1"></i> Cart
              </button>
              <button class="btn btn-sm ${wishActive}" onclick="toggleWishlist('${car.name}', this)" aria-label="Toggle wishlist">
                <i class="fas fa-heart"></i>
              </button>
              <button class="btn btn-sm ${saveActive}" onclick="toggleSaved('${car.name}', this)" aria-label="Toggle saved">
                <i class="fas fa-bookmark"></i>
              </button>
            </div>
          </div>
        </div>
      </div>`;
  });
}

// Search and Filter Cars
function searchCars() {
  const searchInput = document.getElementById("search-input").value.toLowerCase().trim();
  const priceFilter = document.getElementById("price-filter").value;
  const typeFilter = document.getElementById("type-filter").value;
  const locationFilter = document.getElementById("location-filter").value;

  let filteredCars = cars.filter(car => {
    // Search by name or tags
    const matchesSearch = !searchInput ||
      car.name.toLowerCase().includes(searchInput) ||
      car.tags.some(tag => tag.toLowerCase().includes(searchInput));

    // Price filter
    let matchesPrice = true;
    if (priceFilter) {
      const [min, max] = priceFilter.split('-').map(p => parseInt(p));
      if (max) {
        matchesPrice = car.price >= min && car.price <= max;
      } else {
        matchesPrice = car.price >= min;
      }
    }

    // Type filter
    const matchesType = !typeFilter ||
      car.tags.some(tag => tag.toLowerCase().includes(typeFilter.toLowerCase()));

    // Location filter (assuming all cars are available in all locations for now)
    const matchesLocation = !locationFilter || true;

    return matchesSearch && matchesPrice && matchesType && matchesLocation;
  });

  renderRecommendedCars(filteredCars);
}

// Add to cart
function addToCart(carName){
  let cart=get("cart"); cart.push(carName);
  localStorage.setItem("cart",JSON.stringify(cart));
  updateCounts();
  addRecentRental(carName);
  pulseBadge("cart-count");
  showToast(`${carName} added to cart`);
}

// Toggle wishlist
function toggleWishlist(carName, btn){
  let wishlist=get("wishlist");
  if(wishlist.includes(carName)){
    wishlist=wishlist.filter(c=>c!==carName);
    btn.classList.replace("text-danger","text-muted");
    showToast(`${carName} removed from wishlist`);
  } else {
    wishlist.push(carName);
    btn.classList.replace("text-muted","text-danger");
    showToast(`${carName} added to wishlist`);
    pulseBadge("wishlist-count");
  }
  localStorage.setItem("wishlist",JSON.stringify(wishlist));
  updateCounts();
}

// Toggle saved
function toggleSaved(carName, btn){
  let saved=get("savedCars");
  if(saved.includes(carName)){
    saved=saved.filter(c=>c!==carName);
    btn.classList.replace("text-warning","text-muted");
    showToast(`${carName} removed from saved`);
  } else {
    saved.push(carName);
    btn.classList.replace("text-muted","text-warning");
    showToast(`${carName} saved`);
    pulseBadge("saved-count");
  }
  localStorage.setItem("savedCars",JSON.stringify(saved));
  updateCounts();
}

// Badge pulse animation
function pulseBadge(id){
  const badge=document.getElementById(id);
  badge.classList.add("animate__animated","animate__rubberBand");
  badge.addEventListener("animationend",()=>badge.classList.remove("animate__animated","animate__rubberBand"),{once:true});
}

// Show toast
function showToast(msg){
  const toast=document.getElementById("toast");
  toast.querySelector(".toast-body").textContent=msg;
  new bootstrap.Toast(toast).show();
}

// Recent Rentals
function renderRecentRentals(){
  const list=document.getElementById("recent-rentals");
  const rentals=get("recentRentals");
  if(!rentals.length){
    list.innerHTML="<li class='list-group-item text-muted'>No rentals yet.</li>";
    return;
  }
  list.innerHTML="";
  rentals.slice(-5).reverse().forEach(r=>{
    list.innerHTML+=`<li class="list-group-item"><i class="fas fa-car text-success me-2"></i>${r}</li>`;
  });
}
function addRecentRental(carName){
  let rentals=get("recentRentals");
  rentals.push(carName);
  localStorage.setItem("recentRentals",JSON.stringify(rentals));
  renderRecentRentals();
}

// Counts
function updateCounts(){
 document.getElementById("cart-count").textContent=get("cart").length;
 document.getElementById("wishlist-count").textContent=get("wishlist").length;
 document.getElementById("saved-count").textContent=get("savedCars").length;
 document.getElementById("stat-cart").textContent=`${get("cart").length} items`;
 document.getElementById("stat-wishlist").textContent=`${get("wishlist").length} items`;
 document.getElementById("stat-saved").textContent=`${get("savedCars").length} items`;
}

  // Personalized welcome with avatar + initials
  document.addEventListener("DOMContentLoaded", async () => {
    const userJson = localStorage.getItem("user");
    if (!userJson) {
      window.location = "login.html";
      return;
    }

    let user = JSON.parse(userJson);

    // Fetch latest profile
    try {
      const res = await fetch(`${API_BASE}/profile`, {credentials: "include"});
      if (res.ok) {
        const data = await res.json();
        user = data.user;
        localStorage.setItem("user", JSON.stringify(user));
      }
    } catch (err) {
      console.error("Failed to fetch profile:", err);
    }

    let fullName = user?.name?.trim() || user?.email?.split("@")[0] || "User";
    let firstName = fullName.split(" ")[0]; // First word only
    let initials = fullName.split(" ")
      .map(n => n[0])
      .join("")
      .substring(0, 2)
      .toUpperCase();

    // Navbar profile (full name)
    document.getElementById("user-name").textContent = fullName;

    // Dashboard greeting (first name only)
    document.getElementById("welcome-user").textContent = firstName;

    // Avatar handling (image or initials fallback)
    if (user?.profilePicture?.url || user?.avatar) {
      const imgSrc = user?.profilePicture?.url || user?.avatar;
      document.getElementById("nav-avatar").innerHTML =
        `<img src="${imgSrc}" class="rounded-circle" style="width:32px;height:32px;object-fit:cover;">`;
      document.getElementById("welcome-avatar").innerHTML =
        `<img src="${imgSrc}" class="rounded-circle border" style="width:60px;height:60px;object-fit:cover;">`;
    } else {
      document.getElementById("nav-avatar").textContent = initials;
      document.getElementById("welcome-avatar").textContent = initials;
    }

    // Add Dashboard link if user is admin
    if (user?.isAdmin || user?.role === 'admin') {
      const dropdownMenu = document.querySelector('.dropdown-menu');
      const dashboardLi = document.createElement('li');
      dashboardLi.innerHTML = '<a class="dropdown-item" href="dashboard.html"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a>';
      dropdownMenu.insertBefore(dashboardLi, dropdownMenu.lastElementChild);
    }

    renderSidebar();
    renderRecommendedCars();
    renderRecentRentals();
    updateCounts();

    // Add event listener for search button
    document.getElementById("search-btn").addEventListener("click", searchCars);

    // Newsletter subscription
    document.getElementById("home-newsletter-subscribe").addEventListener("click", async () => {
      const email = document.getElementById("home-newsletter-email").value.trim();
      if (!email) {
        showToast("Please enter a valid email address.");
        return;
      }
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showToast("Please enter a valid email address.");
        return;
      }
      try {
        const response = await fetch(`${API_BASE}/api/newsletter/subscribe`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email }),
        });

        if (response.status === 409) {
          showToast("This email is already subscribed to our newsletter.");
        } else if (response.ok) {
          showToast("Successfully subscribed to newsletter!");
        } else {
          throw new Error('Subscription failed');
        }
      } catch (error) {
        console.error('Newsletter subscription error:', error);
        showToast("Failed to subscribe. Please try again.");
      }
    });
  });




// Logout
document.getElementById("logout-button").addEventListener("click",()=>{
 localStorage.clear(); window.location="login.html";
});

// Theme toggle
const themeBtn=document.getElementById("theme-toggle");
themeBtn.addEventListener("click",()=>{
 let body=document.body;
 let newTheme=body.getAttribute("data-bs-theme")==="dark"?"light":"dark";
 body.setAttribute("data-bs-theme",newTheme);
 themeBtn.innerHTML=newTheme==="dark"?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>';
 localStorage.setItem("theme",newTheme);
});
const savedTheme=localStorage.getItem("theme")||"light";
document.body.setAttribute("data-bs-theme",savedTheme);
themeBtn.innerHTML=savedTheme==="dark"?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>';
</script>
</body>
</html>